# Next.js 15 ç®¡ç†åå°æ¡†æ¶ - åŸå­åŒ–å¼€å‘ä»»åŠ¡æ¸…å•

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°
åŸºäº Next.js 15 App Router + Supabase + Tailwind CSS 4 + shadcn/ui çš„é€šç”¨åå°ç®¡ç†ç³»ç»Ÿ

## ğŸ¯ æ ¸å¿ƒç»„ä»¶å®Œæ•´æ¸…å•

### ğŸ“¦ åŸºç¡€è®¾æ–½ç»„ä»¶ (12ä¸ª)
1. **é¡¹ç›®åˆå§‹åŒ–é…ç½®**
   - package.json ä¾èµ–é…ç½®
   - tailwind.config.ts é…ç½®
   - globals.css CSSå˜é‡é…ç½®
   - TypeScript é…ç½®

2. **è®¤è¯ç³»ç»Ÿ**
   - Supabase å®¢æˆ·ç«¯é…ç½®
   - è®¤è¯ä¸­é—´ä»¶ (auth-middleware.ts)
   - æƒé™ç³»ç»Ÿ (permissions.ts)
   - ç”¨æˆ·ç±»å‹å®šä¹‰ (types/auth.ts)

3. **æ•°æ®åº“æ¨¡å‹**
   - Prisma schema å®šä¹‰
   - ç”¨æˆ·è¡¨ç»“æ„
   - æƒé™è§’è‰²è¡¨
   - æ•°æ®åº“è¿ç§»æ–‡ä»¶

### ğŸ¨ UI ç»„ä»¶ (15ä¸ª)
4. **å¸ƒå±€ç»„ä»¶**
   - Dashboard Layout (app/dashboard/layout.tsx)
   - Sidebar ä¾§è¾¹æ ç»„ä»¶
   - Header é¡¶éƒ¨å¯¼èˆª
   - PageHeader é¡µé¢æ ‡é¢˜ç»„ä»¶

5. **åŸºç¡€ UI ç»„ä»¶ (shadcn/ui)**
   - Button æŒ‰é’®
   - Input è¾“å…¥æ¡†
   - Card å¡ç‰‡
   - Table è¡¨æ ¼
   - Badge æ ‡ç­¾
   - Avatar å¤´åƒ
   - DropdownMenu ä¸‹æ‹‰èœå•
   - Dialog å¯¹è¯æ¡†
   - Form è¡¨å•ç»„ä»¶

6. **ä¸šåŠ¡ç»„ä»¶**
   - UserTable ç”¨æˆ·åˆ—è¡¨è¡¨æ ¼
   - UserForm ç”¨æˆ·è¡¨å•
   - PermissionGuard æƒé™å®ˆå«ç»„ä»¶

### ğŸ“„ é¡µé¢ç»„ä»¶ (8ä¸ª)
7. **è®¤è¯é¡µé¢**
   - ç™»å½•é¡µé¢ (app/(auth)/login/page.tsx)
   - æ³¨å†Œé¡µé¢ (app/(auth)/register/page.tsx)

8. **ä»ªè¡¨æ¿é¡µé¢**
   - ä»ªè¡¨æ¿é¦–é¡µ (app/dashboard/page.tsx)
   - ç”¨æˆ·åˆ—è¡¨é¡µ (app/dashboard/users/page.tsx)
   - ç”¨æˆ·åˆ›å»ºé¡µ (app/dashboard/users/create/page.tsx)
   - ç”¨æˆ·ç¼–è¾‘é¡µ (app/dashboard/users/[id]/edit/page.tsx)
   - ç”¨æˆ·è¯¦æƒ…é¡µ (app/dashboard/users/[id]/page.tsx)
   - ä¸ªäººèµ„æ–™é¡µ (app/dashboard/profile/page.tsx)

9. **è®¾ç½®é¡µé¢**
   - ç³»ç»Ÿè®¾ç½®ä¸»é¡µ (app/dashboard/settings/page.tsx)
   - é€šç”¨è®¾ç½®é¡µ (app/dashboard/settings/general/page.tsx)
   - å®‰å…¨è®¾ç½®é¡µ (app/dashboard/settings/security/page.tsx)

### ğŸ”Œ API ç«¯ç‚¹ (8ä¸ª)
10. **è®¤è¯ API**
    - POST /api/auth/login
    - POST /api/auth/logout
    - GET /api/auth/me

11. **ç”¨æˆ·ç®¡ç† API**
    - GET /api/users (åˆ—è¡¨ + åˆ†é¡µ + æœç´¢)
    - POST /api/users (åˆ›å»ºç”¨æˆ·)
    - GET /api/users/[id] (ç”¨æˆ·è¯¦æƒ…)
    - PUT /api/users/[id] (æ›´æ–°ç”¨æˆ·)
    - DELETE /api/users/[id] (åˆ é™¤ç”¨æˆ·)

12. **è®¾ç½® API**
    - GET /api/settings (è·å–è®¾ç½®)
    - PUT /api/settings (æ›´æ–°è®¾ç½®)

### ğŸ› ï¸ å·¥å…·å‡½æ•° (6ä¸ª)
13. **æ ¸å¿ƒå·¥å…·**
    - lib/auth.ts (è®¤è¯å·¥å…·å‡½æ•°)
    - lib/supabase.ts (Supabase å®¢æˆ·ç«¯)
    - lib/validations/ (Zod éªŒè¯ schema)
    - lib/utils.ts (é€šç”¨å·¥å…·å‡½æ•°)
    - lib/constants.ts (å¸¸é‡å®šä¹‰)
    - lib/api-response.ts (APIå“åº”æ ¼å¼åŒ–)

---

## ğŸš€ Phase 1: é¡¹ç›®åŸºç¡€è®¾æ–½ (é¢„è®¡ 2 å°æ—¶)

### Task 1.1: é¡¹ç›®åˆå§‹åŒ–ä¸ä¾èµ–å®‰è£…
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**å…·ä½“ä»»åŠ¡**:
```bash
# åˆ›å»º Next.js é¡¹ç›®
npx create-next-app@latest next-admin --typescript --tailwind --app

# è¿›å…¥é¡¹ç›®ç›®å½•
cd next-admin

# å®‰è£… shadcn/ui
npx shadcn-ui@latest init

# å®‰è£…å¿…éœ€ç»„ä»¶
npx shadcn-ui@latest add button input card table badge avatar dropdown-menu dialog form

# å®‰è£…å…¶ä»–ä¾èµ–
npm install @supabase/supabase-js prisma @prisma/client
npm install react-hook-form zod @hookform/resolvers
npm install lucide-react @tanstack/react-query
npm install class-variance-authority clsx tailwind-merge
npm install next-themes
```

**éªŒè¯æ ‡å‡†**:
- [ ] package.json åŒ…å«æ‰€æœ‰å¿…éœ€ä¾èµ–
- [ ] é¡¹ç›®å¯ä»¥æ­£å¸¸å¯åŠ¨ (`npm run dev`)
- [ ] æ—  TypeScript é”™è¯¯

### Task 1.2: Tailwind CSS 4 + shadcn/ui é…ç½®
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **tailwind.config.ts** - å®Œæ•´çš„ Tailwind é…ç½®
2. **app/globals.css** - CSS å˜é‡å®šä¹‰
3. **components/ui/** - shadcn/ui ç»„ä»¶æ–‡ä»¶å¤¹

**å…³é”®é…ç½®å†…å®¹**:
```typescript
// tailwind.config.ts å¿…é¡»åŒ…å«å®Œæ•´çš„è‰²å½©ç³»ç»Ÿ
const config: Config = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        // ... å®Œæ•´è‰²å½©å˜é‡
      }
    }
  }
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] æ·±è‰²/æµ…è‰²ä¸»é¢˜æ­£å¸¸åˆ‡æ¢
- [ ] shadcn/ui ç»„ä»¶æ ·å¼æ­£ç¡®æ¸²æŸ“
- [ ] æ—  CSS å˜é‡æœªå®šä¹‰é”™è¯¯

### Task 1.3: TypeScript ç±»å‹å®šä¹‰
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **types/auth.ts** - ç”¨æˆ·è®¤è¯ç›¸å…³ç±»å‹
2. **types/api.ts** - API å“åº”æ ¼å¼ç±»å‹
3. **types/database.ts** - æ•°æ®åº“æ¨¡å‹ç±»å‹

**æ ¸å¿ƒç±»å‹å®šä¹‰**:
```typescript
// types/auth.ts
export type UserRole = 'super_admin' | 'admin' | 'member' | 'viewer'

export interface User {
  id: string
  email: string
  name: string | null
  role: UserRole
  created_at: string
  updated_at: string
}

export interface AuthContext {
  user: User | null
  isLoading: boolean
  login: (email: string, password: string) => Promise<void>
  logout: () => Promise<void>
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] æ‰€æœ‰ç±»å‹å¯¼å‡ºæ­£å¸¸
- [ ] æ—  TypeScript ç±»å‹é”™è¯¯
- [ ] ç±»å‹è‡ªåŠ¨è¡¥å…¨å·¥ä½œæ­£å¸¸

### Task 1.4: ç¯å¢ƒé…ç½®
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **.env.local** - æœ¬åœ°ç¯å¢ƒå˜é‡
2. **.env.example** - ç¯å¢ƒå˜é‡æ¨¡æ¿

**å¿…éœ€ç¯å¢ƒå˜é‡**:
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
DATABASE_URL=your_database_url
MULTI_TENANT=false
```

**éªŒè¯æ ‡å‡†**:
- [ ] ç¯å¢ƒå˜é‡æ­£ç¡®åŠ è½½
- [ ] Supabase è¿æ¥æ­£å¸¸

---

## ğŸ” Phase 2: è®¤è¯ä¸æƒé™ç³»ç»Ÿ (é¢„è®¡ 3 å°æ—¶)

### Task 2.1: Supabase è®¤è¯é…ç½®
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **lib/supabase.ts** - Supabase å®¢æˆ·ç«¯é…ç½®
2. **lib/auth.ts** - è®¤è¯å·¥å…·å‡½æ•°

**æ ¸å¿ƒåŠŸèƒ½**:
```typescript
// lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

// lib/auth.ts
export async function getCurrentUser() {
  // ä» cookie æˆ– session è·å–å½“å‰ç”¨æˆ·
}

export async function loginUser(email: string, password: string) {
  // ç”¨æˆ·ç™»å½•é€»è¾‘
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] Supabase å®¢æˆ·ç«¯æ­£å¸¸åˆå§‹åŒ–
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] Session ç®¡ç†æ­£å¸¸

### Task 2.2: æƒé™ç³»ç»Ÿè®¾è®¡
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 60åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **lib/permissions.ts** - æƒé™å®šä¹‰ä¸æ£€æŸ¥
2. **lib/auth-middleware.ts** - è®¤è¯ä¸­é—´ä»¶

**æƒé™çŸ©é˜µå®ç°**:
```typescript
// lib/permissions.ts
export const PERMISSIONS = {
  'users.view': ['super_admin', 'admin'],
  'users.create': ['super_admin', 'admin'], 
  'users.edit': ['super_admin', 'admin'],
  'users.delete': ['super_admin'],
  'settings.view': ['super_admin', 'admin'],
  'settings.edit': ['super_admin'],
  'dashboard.view': ['super_admin', 'admin', 'member', 'viewer'],
} as const

export function hasPermission(userRole: UserRole, permission: keyof typeof PERMISSIONS) {
  return PERMISSIONS[permission].includes(userRole)
}
```

**ä¸­é—´ä»¶å®ç°**:
```typescript
// lib/auth-middleware.ts
export async function requireAuth() {
  const user = await getCurrentUser()
  if (!user) {
    redirect('/login')
  }
  return user
}

export async function requirePermission(permission: keyof typeof PERMISSIONS) {
  const user = await requireAuth()
  if (!hasPermission(user.role, permission)) {
    redirect('/dashboard?error=permission_denied')
  }
  return user
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] æƒé™æ£€æŸ¥é€»è¾‘æ­£ç¡®
- [ ] æœªæˆæƒè®¿é—®æ­£ç¡®é‡å®šå‘
- [ ] ä¸åŒè§’è‰²çœ‹åˆ°ä¸åŒèœå•

### Task 2.3: æ•°æ®åº“æ¨¡å‹è®¾è®¡
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **prisma/schema.prisma** - æ•°æ®åº“æ¨¡å‹å®šä¹‰
2. **prisma/migrations/** - æ•°æ®åº“è¿ç§»æ–‡ä»¶

**æ ¸å¿ƒæ¨¡å‹**:
```prisma
model User {
  id          String   @id @default(cuid())
  email       String   @unique
  password    String?
  name        String?
  role        UserRole @default(MEMBER)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  
  @@map("users")
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  MEMBER
  VIEWER
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] æ•°æ®åº“æ¨¡å¼åŒæ­¥æˆåŠŸ
- [ ] ç”¨æˆ·è¡¨åˆ›å»ºæ­£ç¡®
- [ ] æ•°æ®ç±»å‹å®šä¹‰æ­£ç¡®

### Task 2.4: è®¤è¯ç»„ä»¶å¼€å‘
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **components/auth/auth-provider.tsx** - è®¤è¯ä¸Šä¸‹æ–‡
2. **components/auth/permission-guard.tsx** - æƒé™å®ˆå«ç»„ä»¶

**æ ¸å¿ƒå®ç°**:
```typescript
// components/auth/permission-guard.tsx
interface PermissionGuardProps {
  permission: keyof typeof PERMISSIONS
  children: React.ReactNode
  fallback?: React.ReactNode
}

export function PermissionGuard({ permission, children, fallback }: PermissionGuardProps) {
  const { user } = useAuth()
  
  if (!user || !hasPermission(user.role, permission)) {
    return fallback || null
  }
  
  return <>{children}</>
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] è®¤è¯ä¸Šä¸‹æ–‡æ­£å¸¸å·¥ä½œ
- [ ] æƒé™å®ˆå«ç»„ä»¶æ­£ç¡®éšè—/æ˜¾ç¤ºå†…å®¹
- [ ] ç”¨æˆ·çŠ¶æ€æ›´æ–°æ­£å¸¸

---

## ğŸ¨ Phase 3: æ ¸å¿ƒå¸ƒå±€ç³»ç»Ÿ (é¢„è®¡ 2.5 å°æ—¶)

### Task 3.1: Dashboard ä¸»å¸ƒå±€
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 60åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/layout.tsx** - ä»ªè¡¨æ¿ä¸»å¸ƒå±€
2. **components/dashboard/sidebar.tsx** - ä¾§è¾¹æ ç»„ä»¶
3. **components/dashboard/header.tsx** - é¡¶éƒ¨å¯¼èˆª

**å¸ƒå±€ç»“æ„**:
```typescript
// app/dashboard/layout.tsx
export default async function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  const user = await requireAuth()
  
  return (
    <div className="flex h-screen bg-gray-50">
      <div className="w-64 bg-white border-r border-gray-200 flex-shrink-0">
        <Sidebar user={user} />
      </div>
      <div className="flex-1 flex flex-col min-w-0">
        <Header user={user} />
        <main className="flex-1 p-6 overflow-auto">
          <div className="max-w-7xl mx-auto">
            {children}
          </div>
        </main>
      </div>
    </div>
  )
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] å¸ƒå±€å“åº”å¼æ­£å¸¸
- [ ] ä¾§è¾¹æ å›ºå®šå®½åº¦
- [ ] ä¸»å†…å®¹åŒºæ»šåŠ¨æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯ä½“éªŒè‰¯å¥½

### Task 3.2: ä¾§è¾¹æ å¯¼èˆªç³»ç»Ÿ
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 75åˆ†é’Ÿ

**æ ¸å¿ƒåŠŸèƒ½**:
- åŸºäºæƒé™çš„èœå•è¿‡æ»¤
- å½“å‰é¡µé¢é«˜äº®
- å¤šçº§èœå•å±•å¼€/æ”¶èµ·
- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º

**èœå•é…ç½®**:
```typescript
const menuItems: MenuItem[] = [
  {
    name: 'æ¦‚è§ˆ',
    href: '/dashboard',
    icon: 'ğŸ“Š',
    permission: 'dashboard.view'
  },
  {
    name: 'ç”¨æˆ·ç®¡ç†',
    href: '/dashboard/users',
    icon: 'ğŸ‘¥',
    permission: 'users.view',
    children: [
      { name: 'ç”¨æˆ·åˆ—è¡¨', href: '/dashboard/users', icon: 'ğŸ“‹' },
      { name: 'æ–°å»ºç”¨æˆ·', href: '/dashboard/users/create', icon: 'â•', permission: 'users.create' }
    ]
  }
]
```

**éªŒè¯æ ‡å‡†**:
- [ ] ä¸åŒè§’è‰²çœ‹åˆ°ä¸åŒèœå•é¡¹
- [ ] å½“å‰é¡µé¢æ­£ç¡®é«˜äº®
- [ ] å­èœå•å±•å¼€/æ”¶èµ·æ­£å¸¸
- [ ] æƒé™è¿‡æ»¤æ­£ç¡®

### Task 3.3: é¡µé¢æ¨¡æ¿ç»„ä»¶
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **components/dashboard/page-header.tsx** - é¡µé¢æ ‡é¢˜ç»„ä»¶

**æ¨¡æ¿ç»“æ„**:
```typescript
interface PageHeaderProps {
  title: string
  description?: string
  action?: React.ReactNode
}

export function PageHeader({ title, description, action }: PageHeaderProps) {
  return (
    <div className="flex items-center justify-between pb-6 border-b border-gray-200 mb-6">
      <div>
        <h1 className="text-2xl font-bold text-gray-900">{title}</h1>
        {description && (
          <p className="text-gray-600 mt-1">{description}</p>
        )}
      </div>
      {action && <div>{action}</div>}
    </div>
  )
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] é¡µé¢æ ‡é¢˜æ ·å¼ç»Ÿä¸€
- [ ] æ“ä½œæŒ‰é’®ä½ç½®æ­£ç¡®
- [ ] æè¿°æ–‡æœ¬æ˜¾ç¤ºæ­£å¸¸

---

## ğŸ‘¥ Phase 4: ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ (é¢„è®¡ 4 å°æ—¶)

### Task 4.1: ç”¨æˆ·åˆ—è¡¨é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 90åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/users/page.tsx** - ç”¨æˆ·åˆ—è¡¨é¡µé¢
2. **components/users/user-table.tsx** - ç”¨æˆ·è¡¨æ ¼ç»„ä»¶
3. **components/users/user-filters.tsx** - ç­›é€‰ç»„ä»¶

**æ ¸å¿ƒåŠŸèƒ½**:
- ç”¨æˆ·åˆ—è¡¨å±•ç¤º (è¡¨æ ¼å½¢å¼)
- æœç´¢åŠŸèƒ½ (æŒ‰å§“å/é‚®ç®±)
- è§’è‰²ç­›é€‰
- åˆ†é¡µåŠŸèƒ½
- æ’åºåŠŸèƒ½ (æŒ‰åˆ›å»ºæ—¶é—´/å§“å/é‚®ç®±)

**è¡¨æ ¼åˆ—å®šä¹‰**:
- å¤´åƒ + å§“å
- é‚®ç®±åœ°å€
- ç”¨æˆ·è§’è‰² (Badgeæ˜¾ç¤º)
- åˆ›å»ºæ—¶é—´
- çŠ¶æ€ (å¯ç”¨/ç¦ç”¨)
- æ“ä½œæŒ‰é’® (æŸ¥çœ‹/ç¼–è¾‘/åˆ é™¤)

**éªŒè¯æ ‡å‡†**:
- [ ] è¡¨æ ¼æ•°æ®æ­£ç¡®å±•ç¤º
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] åˆ†é¡µå¯¼èˆªæ­£å¸¸
- [ ] æƒé™æ§åˆ¶æ­£ç¡® (åªæœ‰ admin+ å¯è®¿é—®)

### Task 4.2: ç”¨æˆ·åˆ›å»ºé¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 60åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/users/create/page.tsx** - ç”¨æˆ·åˆ›å»ºé¡µé¢
2. **components/users/user-form.tsx** - ç”¨æˆ·è¡¨å•ç»„ä»¶
3. **lib/validations/user.ts** - ç”¨æˆ·éªŒè¯ schema

**è¡¨å•å­—æ®µ**:
- å§“å (å¿…å¡«)
- é‚®ç®± (å¿…å¡«, å”¯ä¸€)
- å¯†ç  (å¿…å¡«, è‡³å°‘8ä½)
- ç¡®è®¤å¯†ç 
- ç”¨æˆ·è§’è‰² (ä¸‹æ‹‰é€‰æ‹©)

**éªŒè¯è§„åˆ™**:
```typescript
// lib/validations/user.ts
export const createUserSchema = z.object({
  name: z.string().min(1, "å§“åä¸èƒ½ä¸ºç©º"),
  email: z.string().email("è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"),
  password: z.string().min(8, "å¯†ç è‡³å°‘8ä½"),
  confirmPassword: z.string(),
  role: z.enum(['super_admin', 'admin', 'member', 'viewer'])
}).refine((data) => data.password === data.confirmPassword, {
  message: "ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´",
  path: ["confirmPassword"],
})
```

**éªŒè¯æ ‡å‡†**:
- [ ] è¡¨å•éªŒè¯æ­£ç¡®
- [ ] åˆ›å»ºæˆåŠŸåè·³è½¬åˆ°ç”¨æˆ·åˆ—è¡¨
- [ ] é”™è¯¯ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [ ] åªæœ‰ admin+ å¯è®¿é—®

### Task 4.3: ç”¨æˆ·ç¼–è¾‘é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/users/[id]/edit/page.tsx** - ç”¨æˆ·ç¼–è¾‘é¡µé¢
2. **lib/validations/user.ts** - æ›´æ–°ç”¨æˆ· schema

**ç¼–è¾‘åŠŸèƒ½**:
- é¢„å¡«å……ç°æœ‰ç”¨æˆ·æ•°æ®
- å¯é€‰å¯†ç æ›´æ–°
- è§’è‰²å˜æ›´ (ä»… admin+ å¯ä¿®æ”¹)
- è´¦æˆ·å¯ç”¨/ç¦ç”¨

**éªŒè¯æ ‡å‡†**:
- [ ] ç”¨æˆ·æ•°æ®é¢„å¡«å……æ­£ç¡®
- [ ] æ›´æ–°æˆåŠŸåæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
- [ ] æƒé™æ§åˆ¶æ­£ç¡®
- [ ] å¯†ç å­—æ®µå¯é€‰æ›´æ–°

### Task 4.4: ç”¨æˆ·è¯¦æƒ…é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/users/[id]/page.tsx** - ç”¨æˆ·è¯¦æƒ…é¡µé¢

**æ˜¾ç¤ºä¿¡æ¯**:
- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- è§’è‰²æƒé™åˆ—è¡¨
- ç™»å½•å†å² (å¦‚æœæœ‰)
- åˆ›å»º/æ›´æ–°æ—¶é—´

**éªŒè¯æ ‡å‡†**:
- [ ] ç”¨æˆ·ä¿¡æ¯å®Œæ•´æ˜¾ç¤º
- [ ] æƒé™åˆ—è¡¨æ­£ç¡®
- [ ] é¡µé¢å¸ƒå±€ç¾è§‚

### Task 4.5: ç”¨æˆ·ç®¡ç† API ç«¯ç‚¹
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 75åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/api/users/route.ts** - GET/POST ç”¨æˆ·åˆ—è¡¨/åˆ›å»º
2. **app/api/users/[id]/route.ts** - GET/PUT/DELETE å•ä¸ªç”¨æˆ·

**API ç«¯ç‚¹å®ç°**:

**GET /api/users** - ç”¨æˆ·åˆ—è¡¨ + æœç´¢ + åˆ†é¡µ
```typescript
// æŸ¥è¯¢å‚æ•°
interface UsersQuery {
  page?: number        // é¡µç ï¼Œé»˜è®¤1
  limit?: number       // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
  search?: string      // æœç´¢å…³é”®è¯
  role?: UserRole      // è§’è‰²ç­›é€‰
  sort?: 'name' | 'email' | 'created_at'  // æ’åºå­—æ®µ
  order?: 'asc' | 'desc'  // æ’åºæ–¹å‘
}

// å“åº”æ ¼å¼
interface UsersResponse {
  success: boolean
  data: {
    users: User[]
    pagination: {
      current: number
      total: number
      pages: number
      limit: number
    }
  }
}
```

**POST /api/users** - åˆ›å»ºç”¨æˆ·
**PUT /api/users/[id]** - æ›´æ–°ç”¨æˆ·
**DELETE /api/users/[id]** - åˆ é™¤ç”¨æˆ·

**éªŒè¯æ ‡å‡†**:
- [ ] æ‰€æœ‰ API ç«¯ç‚¹æ­£å¸¸å“åº”
- [ ] æƒé™æ£€æŸ¥æ­£ç¡®
- [ ] è¾“å…¥éªŒè¯æ­£ç¡®
- [ ] é”™è¯¯å¤„ç†å®Œå–„

---

## ğŸ  Phase 5: æ ¸å¿ƒé¡µé¢å¼€å‘ (é¢„è®¡ 2 å°æ—¶)

### Task 5.1: è®¤è¯é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜
**é¢„è®¡æ—¶é—´**: 60åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/(auth)/login/page.tsx** - ç™»å½•é¡µé¢
2. **app/(auth)/register/page.tsx** - æ³¨å†Œé¡µé¢
3. **components/auth/login-form.tsx** - ç™»å½•è¡¨å•
4. **components/auth/register-form.tsx** - æ³¨å†Œè¡¨å•

**ç™»å½•åŠŸèƒ½**:
- é‚®ç®± + å¯†ç ç™»å½•
- è®°ä½ç™»å½•çŠ¶æ€é€‰é¡¹
- è¡¨å•éªŒè¯
- é”™è¯¯æç¤º

**æ³¨å†ŒåŠŸèƒ½**:
- ä»… super_admin å¯è®¿é—®æ³¨å†Œ
- é‚®ç®±å”¯ä¸€æ€§æ£€æŸ¥
- å¯†ç å¼ºåº¦éªŒè¯
- æˆåŠŸåè‡ªåŠ¨ç™»å½•

**éªŒè¯æ ‡å‡†**:
- [ ] ç™»å½•æˆåŠŸåè·³è½¬åˆ° dashboard
- [ ] è¡¨å•éªŒè¯æ­£ç¡®
- [ ] é”™è¯¯æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤º
- [ ] è®°ä½ç™»å½•çŠ¶æ€æ­£å¸¸

### Task 5.2: ä»ªè¡¨æ¿é¦–é¡µ
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/page.tsx** - ä»ªè¡¨æ¿é¦–é¡µ
2. **components/dashboard/stats-card.tsx** - ç»Ÿè®¡å¡ç‰‡ç»„ä»¶

**é¦–é¡µå†…å®¹**:
- ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ (ç”¨æˆ·æ•°é‡ã€åœ¨çº¿ç”¨æˆ·ç­‰)
- æœ€è¿‘æ´»åŠ¨åˆ—è¡¨
- å¿«æ·æ“ä½œå…¥å£
- æ¬¢è¿ä¿¡æ¯

**éªŒè¯æ ‡å‡†**:
- [ ] ç»Ÿè®¡æ•°æ®æ­£ç¡®æ˜¾ç¤º
- [ ] å¡ç‰‡å¸ƒå±€ç¾è§‚
- [ ] å“åº”å¼è®¾è®¡æ­£å¸¸

### Task 5.3: ä¸ªäººèµ„æ–™é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/profile/page.tsx** - ä¸ªäººèµ„æ–™é¡µé¢

**åŠŸèƒ½**:
- ä¸ªäººä¿¡æ¯ç¼–è¾‘
- å¯†ç ä¿®æ”¹
- å¤´åƒä¸Šä¼  (å¯é€‰)

**éªŒè¯æ ‡å‡†**:
- [ ] ä¸ªäººä¿¡æ¯æ›´æ–°æ­£å¸¸
- [ ] å¯†ç ä¿®æ”¹åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰è§’è‰²éƒ½å¯è®¿é—®

---

## âš™ï¸ Phase 6: ç³»ç»Ÿè®¾ç½® (é¢„è®¡ 1.5 å°æ—¶)

### Task 6.1: ç³»ç»Ÿè®¾ç½®é¡µé¢
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 60åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **app/dashboard/settings/page.tsx** - è®¾ç½®ä¸»é¡µ
2. **app/dashboard/settings/general/page.tsx** - é€šç”¨è®¾ç½®
3. **app/dashboard/settings/security/page.tsx** - å®‰å…¨è®¾ç½®
4. **app/api/settings/route.ts** - è®¾ç½® API

**è®¾ç½®é¡¹ç›®**:
- ç³»ç»Ÿåç§°
- Logo ä¸Šä¼ 
- ä¸»é¢˜é…ç½®
- é‚®ä»¶è®¾ç½®
- å®‰å…¨ç­–ç•¥

**éªŒè¯æ ‡å‡†**:
- [ ] è®¾ç½®ä¿å­˜æ­£å¸¸
- [ ] åªæœ‰ admin+ å¯è®¿é—®
- [ ] è®¾ç½®é¡¹åˆ†ç±»æ¸…æ™°

### Task 6.2: ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **components/theme/theme-toggle.tsx** - ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
2. **components/theme/theme-provider.tsx** - ä¸»é¢˜æä¾›è€…

**åŠŸèƒ½**:
- æ·±è‰²/æµ…è‰²æ¨¡å¼åˆ‡æ¢
- ç³»ç»Ÿä¸»é¢˜è·Ÿéš
- ç”¨æˆ·åå¥½ä¿å­˜

**éªŒè¯æ ‡å‡†**:
- [ ] ä¸»é¢˜åˆ‡æ¢æµç•…
- [ ] ç”¨æˆ·åå¥½æŒä¹…åŒ–
- [ ] æ‰€æœ‰ç»„ä»¶é€‚é…æ·±è‰²æ¨¡å¼

---

## ğŸ”§ Phase 7: å·¥å…·å‡½æ•°ä¸ä¼˜åŒ– (é¢„è®¡ 1 å°æ—¶)

### Task 7.1: API å“åº”æ ‡å‡†åŒ–
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **lib/api-response.ts** - API å“åº”æ ¼å¼åŒ–
2. **lib/error-handler.ts** - é”™è¯¯å¤„ç†ä¸­é—´ä»¶

**æ ‡å‡†å“åº”æ ¼å¼**:
```typescript
interface APIResponse<T> {
  success: boolean
  data?: T
  message?: string
  error?: string
}

// æˆåŠŸå“åº”
export function successResponse<T>(data: T, message?: string): APIResponse<T> {
  return { success: true, data, message }
}

// é”™è¯¯å“åº”
export function errorResponse(error: string, status: number = 400): Response {
  return new Response(
    JSON.stringify({ success: false, error }),
    { status, headers: { 'Content-Type': 'application/json' } }
  )
}
```

**éªŒè¯æ ‡å‡†**:
- [ ] æ‰€æœ‰ API ä½¿ç”¨ç»Ÿä¸€å“åº”æ ¼å¼
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] HTTP çŠ¶æ€ç æ­£ç¡®

### Task 7.2: é€šç”¨å·¥å…·å‡½æ•°
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­
**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**æ–‡ä»¶åˆ›å»º**:
1. **lib/utils.ts** - é€šç”¨å·¥å…·å‡½æ•°
2. **lib/constants.ts** - ç³»ç»Ÿå¸¸é‡

**å·¥å…·å‡½æ•°**:
- æ—¥æœŸæ ¼å¼åŒ–
- æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
- å­—ç¬¦ä¸²å¤„ç†
- è¡¨å•æ•°æ®å¤„ç†

**éªŒè¯æ ‡å‡†**:
- [ ] å·¥å…·å‡½æ•°æ­£å¸¸å·¥ä½œ
- [ ] TypeScript ç±»å‹å®Œæ•´
- [ ] å¯å¤ç”¨æ€§è‰¯å¥½

---

## ğŸ“‹ æœ€ç»ˆéªŒæ”¶æ¸…å•

### âœ… åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ­£å¸¸
- [ ] æƒé™ç³»ç»Ÿæ­£ç¡®å·¥ä½œ
- [ ] ç”¨æˆ·ç®¡ç† CRUD å®Œæ•´
- [ ] é¡µé¢æƒé™æ§åˆ¶æ­£ç¡®
- [ ] API æ¥å£å…¨éƒ¨å®ç°
- [ ] å“åº”å¼è®¾è®¡æ­£å¸¸
- [ ] æ·±è‰²æ¨¡å¼æ­£å¸¸

### âœ… æŠ€æœ¯è§„èŒƒæ£€æŸ¥
- [ ] TypeScript æ— é”™è¯¯
- [ ] ESLint æ£€æŸ¥é€šè¿‡
- [ ] ä»£ç æ ¼å¼è§„èŒƒ
- [ ] ç»„ä»¶å‘½åè§„èŒƒ
- [ ] API å“åº”æ ¼å¼ç»Ÿä¸€

### âœ… ç”¨æˆ·ä½“éªŒæ£€æŸ¥
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦æ­£å¸¸
- [ ] æ“ä½œåé¦ˆåŠæ—¶
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½

### âœ… å®‰å…¨æ€§æ£€æŸ¥
- [ ] è®¤è¯ä¸­é—´ä»¶æ­£å¸¸
- [ ] æƒé™æ§åˆ¶ä¸¥æ ¼
- [ ] è¾“å…¥éªŒè¯å®Œæ•´
- [ ] SQL æ³¨å…¥é˜²æŠ¤
- [ ] XSS æ”»å‡»é˜²æŠ¤

---

## ğŸ“Š å¼€å‘è¿›åº¦è·Ÿè¸ª

| Phase | ä»»åŠ¡æ•°é‡ | é¢„è®¡æ—¶é—´ | çŠ¶æ€ | å®Œæˆæ—¶é—´ |
|-------|---------|---------|------|----------|
| Phase 1: åŸºç¡€è®¾æ–½ | 4 | 2h | â³ å¾…å¼€å§‹ | - |
| Phase 2: è®¤è¯ç³»ç»Ÿ | 4 | 3h | â³ å¾…å¼€å§‹ | - |
| Phase 3: å¸ƒå±€ç³»ç»Ÿ | 3 | 2.5h | â³ å¾…å¼€å§‹ | - |
| Phase 4: ç”¨æˆ·ç®¡ç† | 5 | 4h | â³ å¾…å¼€å§‹ | - |
| Phase 5: æ ¸å¿ƒé¡µé¢ | 3 | 2h | â³ å¾…å¼€å§‹ | - |
| Phase 6: ç³»ç»Ÿè®¾ç½® | 2 | 1.5h | â³ å¾…å¼€å§‹ | - |
| Phase 7: å·¥å…·ä¼˜åŒ– | 2 | 1h | â³ å¾…å¼€å§‹ | - |

**æ€»è®¡**: 23ä¸ªåŸå­ä»»åŠ¡ï¼Œé¢„è®¡ 16 å°æ—¶å¼€å‘æ—¶é—´

---

## ğŸš¨ é£é™©ç‚¹ä¸æ³¨æ„äº‹é¡¹

### é«˜é£é™©ä»»åŠ¡
1. **Task 1.2**: Tailwind CSS 4 é…ç½® - å®¹æ˜“å‡ºç°æ ·å¼ä¸æ¸²æŸ“é—®é¢˜
2. **Task 2.2**: æƒé™ç³»ç»Ÿ - é€»è¾‘å¤æ‚ï¼Œå®¹æ˜“å‡ºç°å®‰å…¨æ¼æ´
3. **Task 4.5**: API ç«¯ç‚¹ - éœ€è¦å®Œæ•´çš„è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

### å…³é”®ä¾èµ–å…³ç³»
- Phase 1 å¿…é¡»å®Œå…¨å®Œæˆæ‰èƒ½å¼€å§‹å…¶ä»– Phase
- Phase 2 è®¤è¯ç³»ç»Ÿå¿…é¡»å®Œæˆæ‰èƒ½å¼€å§‹ Phase 3-7
- æ‰€æœ‰ API ç«¯ç‚¹éƒ½ä¾èµ– Phase 2 çš„æƒé™ä¸­é—´ä»¶

### è´¨é‡ä¿è¯è¦æ±‚
- æ¯ä¸ª Task å®Œæˆåå¿…é¡»é€šè¿‡åŠŸèƒ½éªŒè¯
- æ¯ä¸ª Phase å®Œæˆåå¿…é¡»è¿›è¡Œé›†æˆæµ‹è¯•
- å‘ç°é—®é¢˜å¿…é¡»ç«‹å³æŠ¥å‘Šå¹¶ä¿®å¤

---

## ğŸ“ å¼€å‘æ—¥å¿—æ¨¡æ¿

æ¯å®Œæˆä¸€ä¸ª Taskï¼Œå¿…é¡»è®°å½•ï¼š

### Task X.X å®ŒæˆæŠ¥å‘Š
**ä»»åŠ¡åç§°**: [å…·ä½“ä»»åŠ¡å]
**å®Œæˆæ—¶é—´**: [å®é™…è€—æ—¶]
**åˆ›å»ºæ–‡ä»¶**: 
- [å®Œæ•´æ–‡ä»¶è·¯å¾„1]
- [å®Œæ•´æ–‡ä»¶è·¯å¾„2]

**å®ç°åŠŸèƒ½**:
- [åŠŸèƒ½ç‚¹1]
- [åŠŸèƒ½ç‚¹2]

**éªŒè¯ç»“æœ**:
- [x] éªŒè¯é¡¹1 - é€šè¿‡
- [x] éªŒè¯é¡¹2 - é€šè¿‡

**é‡åˆ°é—®é¢˜**:
- [é—®é¢˜æè¿°] - [è§£å†³æ–¹æ¡ˆ]

**æœªå®Œæˆéƒ¨åˆ†**:
- [å¾…è§£å†³é¡¹ç›®]

---

## ğŸ¯ æ‰§è¡ŒåŸåˆ™

1. **ä¸¥æ ¼æŒ‰ Phase é¡ºåºæ‰§è¡Œ**ï¼Œä¸å¾—è·³è·ƒ
2. **æ¯ä¸ª Task å¿…é¡»å®Œå…¨å®ŒæˆéªŒè¯**æ‰èƒ½è¿›å…¥ä¸‹ä¸€ä¸ª
3. **é‡åˆ°é—®é¢˜ç«‹å³æŠ¥å‘Š**ï¼Œä¸å¾—éšç’æˆ–è·³è¿‡
4. **æ‰€æœ‰åˆ›å»ºçš„æ–‡ä»¶å¿…é¡»è®°å½•å®Œæ•´è·¯å¾„**
5. **ä»£ç è´¨é‡ä¼˜äºè¿›åº¦**ï¼Œç¡®ä¿æ¯è¡Œä»£ç éƒ½æ˜¯å¯ç»´æŠ¤çš„

å‡†å¤‡å¼€å§‹æ‰§è¡Œå¼€å‘ä»»åŠ¡ï¼